<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>{{ title or "RWA Leave System" }}</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Fallback critical styles so the page looks professional even if external CSS fails -->
  <style>
    :root { --royal:#4169e1; --royal-dark:#1746a2; --card:#fff; --card-grad:#fff9d9; }
    *{box-sizing:border-box}
    body{margin:0;font-family:Arial,Helvetica,sans-serif;background:#f5f5f5}
    .nav{background:var(--royal);color:#fff;padding:.8rem 1.2rem;display:flex;align-items:center;justify-content:space-between}
    .brand{font-weight:700;font-size:1.25rem;color:#fff;text-decoration:none}
    .nav-links{list-style:none;margin:0;padding:0;display:flex;gap:1rem}
    .nav-links a{color:#fff;text-decoration:none;font-weight:500}
    .nav-links a:hover{text-decoration:underline}
    .content-wrapper{min-height:100vh;padding:2rem;background:linear-gradient(to bottom,var(--royal) 0%, #ffffff 100%);display:flex;justify-content:center}
    .container{max-width:1000px;width:100%;background:linear-gradient(to bottom,var(--card-grad) 0%, #ffffff 100%);border-radius:8px;box-shadow:0 4px 8px rgba(0,0,0,.1);padding:2rem}
    .flash-stack{margin-bottom:1rem}
    .flash{padding:.8rem;margin-bottom:.5rem;border-radius:4px;font-weight:700}
    .flash-success{background:#d4edda;color:#155724}
    .flash-warning{background:#fff3cd;color:#856404}
    .flash-danger{background:#f8d7da;color:#721c24}
    .flash-info{background:#e0f2fe;color:#075985}
    .flash-secondary{background:#f3f4f6;color:#374151}
    .card{background:#fff;border-radius:8px;box-shadow:0 2px 4px rgba(0,0,0,.1);padding:1.5rem;margin-bottom:1.5rem}
    .btn{background:var(--royal);color:#fff;border:none;padding:.5rem 1rem;border-radius:4px;cursor:pointer}
    .btn:hover{background:var(--royal-dark)}
    .input{width:100%;padding:.5rem;border:1px solid #ccc;border-radius:4px}
    .footer{padding:1rem 2rem;color:#555}
    @media (max-width:720px){.nav{flex-wrap:wrap;gap:.5rem}}
  </style>

  <!-- Main stylesheet (loads from /static). If present, it overrides/extends the fallback above. -->
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}?v=20250908">
</head>
<body>
  <nav class="nav">
    <a class="brand" href="{{ NAV.dashboard }}">RWA Leave System</a>
    <ul class="nav-links">
      {% if current_user.is_authenticated %}
        <li><a href="{{ NAV.dashboard }}">Dashboard</a></li>
        <li><a href="{{ NAV.my_requests }}">My Requests</a></li>
        <li><a href="{{ NAV.team_calendar }}">Calendar</a></li>
        <li><a href="{{ NAV.new_request }}">New Request</a></li>
        {% if NAV.admin %}
          <li><a href="{{ NAV.admin }}">Admin</a></li>
        {% endif %}
        <li><a href="{{ url_for('update_password') }}">Account</a></li>
        <li><a href="{{ NAV.logout }}">Logout</a></li>
      {% else %}
        <li><a href="{{ url_for('login') }}">Login</a></li>
      {% endif %}
    </ul>
  </nav>

  <div class="content-wrapper">
    <div class="container">
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="flash-stack">
            {% for category, message in messages %}
              <div class="flash flash-{{ category|lower }}">{{ message }}</div>
            {% endfor %}
          </div>
        {% endif %}
      {% endwith %}
      {% block content %}{% endblock %}
    </div>
  </div>

  <footer class="footer">
    &copy; {{ current_year }} RWA
  </footer>
</body>
</html>
