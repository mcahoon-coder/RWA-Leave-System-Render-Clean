{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>Leave Requests</h2>
  <table>
    <tr>
      <th>User</th><th>Kind</th><th>Mode</th><th>Hours</th>
      <th>Status</th><th>Dates</th><th>Actions</th>
    </tr>
    {% for r in reqs %}
    <tr>
      <td>{{ r.user.username }}</td>
      <td>{{ r.kind }}</td>
      <td>{{ r.mode }}</td>
      <td>{{ r.hours }}</td>
      <td>{{ r.status }}</td>
      <td>{{ r.start_date }} â†’ {{ r.end_date }}</td>
      <td>
        {% if is_admin and r.status == RequestStatus.pending %}
          <form method="post" action="{{ url_for('approve', req_id=r.id) }}"><button>Approve</button></form>
          <form method="post" action="{{ url_for('disapprove', req_id=r.id) }}"><button>Disapprove</button></form>
        {% elif r.status == RequestStatus.pending and r.user_id == current_user.id %}
          <form method="post" action="{{ url_for('cancel', req_id=r.id) }}"><button>Cancel</button></form>
        {% endif %}
      </td>
    </tr>
    {% endfor %}
  </table>
</div>
{% endblock %}
