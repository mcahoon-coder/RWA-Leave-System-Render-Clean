{% extends "base.html" %}
{% block content %}
<div class="card">
  <h2>Requests</h2>
  <table>
    <tr><th>User</th><th>Dates</th><th>Mode</th><th>Hours</th><th>Status</th><th>Actions</th></tr>
    {% for r in reqs %}
      <tr>
        <td>{{ r.user.username }}</td>
        <td>{{ r.start_date }} â†’ {{ r.end_date }}</td>
        <td>{{ r.mode }}</td>
        <td>{{ r.hours }}</td>
        <td>{{ r.status }}</td>
        <td>
          {% if is_admin %}
            {% if r.status == 'Pending' %}
              <form action="{{ url_for('approve', req_id=r.id) }}" method="post" style="display:inline"><button>Approve</button></form>
              <form action="{{ url_for('disapprove', req_id=r.id) }}" method="post" style="display:inline"><button>Disapprove</button></form>
            {% endif %}
          {% else %}
            {% if r.status in ['Pending','Approved'] %}
              <form action="{{ url_for('cancel', req_id=r.id) }}" method="post" style="display:inline"><button>Cancel</button></form>
            {% endif %}
          {% endif %}
        </td>
      </tr>
    {% else %}
      <tr><td colspan="6">No requests.</td></tr>
    {% endfor %}
  </table>
</div>
{% endblock %}
