{% extends "base.html" %}
{% block title %}Dashboard{% endblock %}

{% block content %}
<h2>Welcome, {{ me.username }}!</h2>

<div class="card">
  <p><strong>Hours Balance:</strong>
    {% if me.hours_balance < 0 %}
      <span style="color:red">{{ '%.2f'|format(me.hours_balance) }} hours</span>
    {% else %}
      {{ '%.2f'|format(me.hours_balance) }} hours
    {% endif %}
  </p>
</div>

<div class="card">
  <h3>Recent Requests</h3>
  {% if recent %}
  <table class="requests-table">
    <tr>
      <th>Kind</th><th>Mode</th><th>Hours</th><th>Status</th><th>Dates</th>
    </tr>
    {% for r in recent %}
    <tr>
      <td>{{ r.kind }}</td>
      <td>{{ r.mode }}</td>
      <td>{{ r.hours }}</td>
      <td>{{ r.status }}</td>
      <td>{{ r.start_date }} â†’ {{ r.end_date }}</td>
    </tr>
    {% endfor %}
  </table>
  {% else %}
    <p>No recent requests.</p>
  {% endif %}
</div>
{% endblock %}
